<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="A website devoted to oneself has been described — by my own Father, no less — as the greatest act of hubris. Welcome aboard!">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Made out of meat (old posts, page 8) | Made out of meat</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="rss.xml">
<link rel="canonical" href="https://www.tartley.com/index-8.html">
<link rel="icon" href="welcome.gif" sizes="16x16">
<link rel="prev" href="index-9.html" type="text/html">
<link rel="next" href="index-7.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://www.tartley.com/">

                <span id="blog-title">Made out of meat</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Posts</a>
                </li>
<li>
<a href="categories/">Tags</a>
                </li>
<li>
<a href="galleries/Drawings">Gallery</a>
                </li>
<li>
<a href="rss.xml">RSS</a>
                </li>
<li>
<a href="about/">About</a>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="https://www.tartley.com/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    <a rel="me" href="https://mastodon.social/@tartley"></a>
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/beautiful-code-leading-programmers-explain-how-they-think/" class="u-url">Beautiful Code : Leading Programmers Explain How They Think</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/beautiful-code-leading-programmers-explain-how-they-think/" rel="bookmark">
            <time class="published dt-published" datetime="2008-02-23T01:29:04-06:00" itemprop="datePublished" title="2008-02-23 01:29">2008-02-23 01:29</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><span style="float: left">
<img alt="Beautiful Code" src="files/2008/02/beautiful-code.jpg"></span></p>
<p><em>33 essays, edited by Andy Oram</em></p>
<p>I was wondering how to explain why I didn't like this book as much as I
thought I would - possibly as much as I thought I <em>ought</em> to. Thirty-odd
genius bitwranglers delving into their favourite bits of code - surely
it must be <em>packed</em> with fabulous insights into the zen of programming.
But something about it left me flat, and I was having trouble putting my
finger on why. Fortunately Jeff Atwood's ever brilliant <em>Coding Horror</em>
has saved me the bother, by <a href="http://www.codinghorror.com/blog/archives/001062.html">explaining it
perfectly</a>.</p>
<p>Programmers love code. It is the culmination of their labours. It's not
just a document or a diagram, but is a dynamic, living record of their
conceptual jujutso. But to focus on the code itself, in a variety of
languages, which few readers are likely to be familiar with all of, is a
relatively superficial theme, and comes at the expense of the abstract
designs that the code embodies, and of the features and capabilities of
the languages themselves.</p>
<p>Rating 6/10: Contains some gems, but generally falls between two stools.</p>
<p><br style="clear: both"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/if-its-good-enough-for-benny/" class="u-url">If it's good enough for Benny...</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/if-its-good-enough-for-benny/" rel="bookmark">
            <time class="published dt-published" datetime="2008-02-16T20:46:00-06:00" itemprop="datePublished" title="2008-02-16 20:46">2008-02-16 20:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><a href="http://www.viagen.com/en/our-services/preserving-your-pets/">These
folks</a> will
store samples of your pet's DNA, so that in the event of their death,
you can replace them with a newer, younger clone.</p>
<p><a href="http://www.viagen.com/en/our-services/preserving-your-pets/" title="Preserving your pets"><img alt="Preserving your
pets" src="files/2008/02/preserving-your-pets.jpg"></a></p>
<p>Apart from the fact it's a gimmick ripoff (\$1,500 to store my pets DNA?
That's quite a freezer they must have there, and the hypothetical
cloning service 'may be offered by some other company at a future time')
it seems to totally miss the point.</p>
<p>If you love your pet, it's surely for their personality. Your shared
experiences and memories, having grown to know one another. I'm talking
about their <em>soul</em>, or the state vector of their consciousness, whatever
you want to call it. Growing a clone in their image is like creating a
twin - it bears no relation to the animal you loved but for its
superficial appearance, and even seems to me to be an insult to the
memory of your former pet, that they could be replaced by the next one
off the shelf. Certainly I wouldn't like to think my loved ones would be
content to replace <em>me</em> with a look-alike.</p>
<p>Sometimes I wonder why we make it so hard on ourselves trying to make an
honest buck when the rest of the world is one big scam, preying on the
vulnerable and the unwary.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/history-of-western-philosophy/" class="u-url">History of Western Philosophy</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/history-of-western-philosophy/" rel="bookmark">
            <time class="published dt-published" datetime="2008-02-16T19:56:26-06:00" itemprop="datePublished" title="2008-02-16 19:56">2008-02-16 19:56</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><span style="float: left">
<img alt="historyofwesternphilosophy.jpg" src="files/2007/07/historyofwesternphilosophy.jpg"></span></p>
<p><em>by Bertrand Russell (1946)</em></p>
<p>I've clearly been putting off this post for <em>months</em>, no doubt
intimidated by my assumption that my review would have to be as weighty
and well-considered as the tome itself. Screw that, a crap post is
better than no post at all.</p>
<p>Overall, I enjoyed it greatly. It is a triumph in illustrating the
breadth of the domain to a philosophical layman. It was as fascinating
for me for the context in which different movements have arisen, for
example the operation and mores of of ancient societies which differed
greatly from our own, such as the Spartans.</p>
<p>In truth, my original acquisition of the book was partly motivated by a
desire to justify my longstanding dismissal of philosophy as a
meaningful discipline, and this narrow minded and self-fulfilling
expectation was indeed confirmed to some extent.</p>
<p>The opening portion of the book, about ancient philosophy, made it all
too easy to infer that the gems of ancient philosophy are very much rare
pinnacles of achievement, set amidst a babble of incoherent theories and
proclamations. The valuable ideas must be carefully searched out,
extracted and refined, much as one might pan for gold on expansive
shores of mud. However, this gratifying exercise in belittlement also
brought with it an increment of my understanding as to why I feel this
way.</p>
<p><a href="http://www.ashersarlin.com/archives/2005/01/oh_come_on_plat.php"><img alt="Plato's greatest finest hour" src="files/2008/02/platos-greatest-hour.gif"></a></p>
<p>It may be all very well for me to sit here nitpicking from atop the
cumulative results of thousands of years of hindsight, but my shrill,
gauche layman objections seem to be rarely well presented, and even less
often indulged with a sensible rebuttal, so I'm glad that I read the
book and gained some context in which to articulate them.</p>
<p>The raising of the intellect above the concerns of mere empiricism, as
typified by the schools of Descartes and Plato, seems to be completely
undermined by the apparently overlooked fact that there is no objective
way of apprising the workings of 'pure reason.' The human mind, of
course, is not capable of 'pure reason', if there even is such a thing,
and is equally incapable of recognising its presence or absence in any
given supposition. As a result, all exercises in deduction are extremely
fallible, and this should come as no surprise to anyone who has ever
forgotten or misjudged something. Just because the mind is not well
understood, that does not make its machinations any less empirical than
the evidence of the senses - what seems to us like logic is entirely
subject to the vagueries of our implementation, regardless of whether or
not our mind's implementation is embodied in our apparent physical
brains or not.</p>
<p>To elevate the conclusions reached by this process above the concerns of
mere empiricism is to put them beyond the reach of any form of feedback
or discernment, a state of affairs which leads to entirely nonsensical
stances standing uncontested for hundreds of years.</p>
<p>Because of this, I would argue that the teachings of thinkers such as
Plato have in fact <em>hindered</em> the development of modern thought, not
just by by blazing trails down several blind alleys, but more
critically, by then systematically putting their own conclusions beyond
the reach of criticism and refinement, effectively removing the
intellectual tools that might have enabled pupils to retrace their
steps, and map out the geography of thought more thoroughly.</p>
<p>The second portion of the book is the weakest, dealing with the only
form of educated rumination occurring during the middle ages, which was
religious in nature. It is perhaps unsurprising that a period such as
this is notable for it's lack of original thought, barring individuals
every few centuries such as Aquinas. As a result, large parts of this
section degenerate into a litany of power struggles, assassinations and
coronations, notable only for their tedium.</p>
<p>The final portion deals with modern philosophers, which regains the
interest of the early sections, by virtue of describing the works of
less religiously restricted protagonists, nurtured by the widening
availability of education and communication, resulting in a glorious,
chaotic competition of ideas. It was only during this section that I
feel I gained an appreciation for the process itself, as opposed to the
teachings of individual practitioners.</p>
<p>We, as humans, are rubbish at the act of thinking - we leap to
conclusions, exhibit enormous biases, forget things, overlook things,
make faulty correlations, are inconsistent, are influenced by personal
gain and traumatic past experience, and worst of all: we are incapable
of seeing these weaknesses - completely blind to our own incompetence.
The means by which we evaluate our own conclusions are tied inextricably
to the mechanism which derived them in the first place - we always think
we are right.</p>
<p>Given this, it is no surprise that we can never agree on anything. We
can never see each other's point of view. Whether tackling the problems
of day-to-day life, or pondering the riddles of existence, a million
different people will jump in a million different directions, no two
quite the same. Most of those ideas turn out to be worthless. Idiocy
that is detrimental or ineffectual. Only a few of them stick - and there
is no way of knowing the merit or otherwise of any idea unless you have
some criteria to judge them by. In day-to-day living, some ideas will
allow the individual or group to prosper and be happy. In fields where
objective measurement is possible - the sciences - then cumulative
progress can be made, as successful ideas are shared and built upon.</p>
<p>However, outside of these domains, we may be captivated and entranced by
the enthralling pictures philosophy presents to us, and our lives may be
enriched as a result. But without any means of discerning the good ideas
from the bad, we are are forever doomed to explore a multitude of
alternative, competing, overlapping intellectual explorations, without
any knowledge of which ones are meaningful, and which ones are purely
fanciful. It may be great fun, but it's masturbation.</p>
<p>Rating: 8/10: The box with which to call me <em>philistine</em> is below:</p>
<p><br style="clear: both"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/pyglet-week-2-better-vertex-throughput/" class="u-url">pyglet week 2: Better Vertex Throughput</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/pyglet-week-2-better-vertex-throughput/" rel="bookmark">
            <time class="published dt-published" datetime="2008-02-16T04:24:33-06:00" itemprop="datePublished" title="2008-02-16 04:24">2008-02-16 04:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In last week's
<a href="posts/2d-graphics-with-pyglet-and-opengl">2D Graphics With pyglet and OpenGL</a>,
I used the <a href="http://www.pyglet.org/">pyglet</a> library to produce some OpenGL
triangles on the screen, from my rough-and-ready Python code. This week,
I want to try to boost the throughput, to get some idea of how complex a
scene we can realistically render from Python, while still maintaining a
decent frame rate.</p>
<p>I was a little optimistic in my assessment of how fast last week's code
was running. When I come to measure it carefully, I find that displaying
just <strong>85 triangles</strong> will bring the framerate down to a minimally
acceptable <strong>30fps</strong>. This is on my lappy - a Thinkpad T60, with a dual
1.6GHz cores, only one of which is busy, and an ATI Radeon Mobility
X1400 running at 1680x1050. The framerate seems fairly independent of
what size the triangles are, and of whether blend is enabled to make
them translucent.</p>
<p>So what can we do to improve this? I suspect that an easy win would be
to replace each entity's single triangle with a collection of triangles,
specified by an array of vertices. To assemble the vertex list, we
create the first vertex at (0, 0), and then lay all the following
vertices in a ring around it.</p>
<p><img alt="Seven
vertices" src="files/2008/02/points5.png"><img alt="Five
triangles" src="files/2008/02/fan5.png"></p>
<p>I've shown vertex 6 lying adjacent to vertex 1, just to make them both
visible, but in actuality they are coincident. Rendering these N
vertices using glDrawArray() can produce N-2 triangles in the best case.
All these vertices are shunted to the graphics card, translated,
rotated, scaled and rendered in hardware, all without our code having to
do any extra work, and hopefully without any significant performance
penalty.</p>
<p>Starting with the code from last week, I modify it to generate the
vertex list using the following new static member on class Entity. Note
that I have coined the term <em>shard</em> to describe the individual triangles
rendered by class Entity:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="nc">Entity</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="n">numShards</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">vertsGl</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_generateVerts</span><span class="p">():</span>
        <span class="n">verts</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Entity</span><span class="o">.</span><span class="n">numShards</span><span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">bearing</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">/</span> <span class="n">Entity</span><span class="o">.</span><span class="n">numShards</span>
            <span class="n">radius</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">bearing</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Position</span><span class="o">.</span><span class="n">CoordsFromPolar</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">bearing</span><span class="p">)</span>
            <span class="n">verts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">verts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="n">Entity</span><span class="o">.</span><span class="n">vertsGl</span> <span class="o">=</span> <span class="p">(</span><span class="n">GLfloat</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">verts</span><span class="p">))(</span><span class="o">*</span><span class="n">verts</span><span class="p">)</span>

<span class="n">Entity</span><span class="o">.</span><span class="n">_generateVerts</span><span class="p">()</span>
</pre></div>

<p>The for-loop simply creates the list of vertex co-ordinates, as
illustrated above. The cryptic-looking penultimate line converts that
list into an array of GLfloats, as provided by ctypes, and stores that
array on a class level attribute, Entity.vertsGl. The final line then
calls this member function as soon as the class is defined, creating our
vertex array at program startup. We also create a similar array of
colors, which will be used to color each vertex, but since I want each
fan drawn in a different set of colors, this is done in
Entity.__init__(), and the resulting arrays are stored on the
instance (not shown).</p>
<p>This vertex and color arrays can then be rendered as a triangle fan
using the following Entity.draw() method:</p>
<div class="code"><pre class="code literal-block"><span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">glLoadIdentity</span><span class="p">()</span>
    <span class="n">glTranslatef</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">glRotatef</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="o">.</span><span class="n">rot</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">glScalef</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">glEnableClientState</span><span class="p">(</span><span class="n">GL_VERTEX_ARRAY</span><span class="p">)</span>
    <span class="n">glEnableClientState</span><span class="p">(</span><span class="n">GL_COLOR_ARRAY</span><span class="p">)</span>
    <span class="n">glVertexPointer</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Entity</span><span class="o">.</span><span class="n">vertsGl</span><span class="p">)</span>
    <span class="n">glColorPointer</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorsGl</span><span class="p">)</span>

    <span class="n">glDrawArrays</span><span class="p">(</span><span class="n">GL_TRIANGLE_FAN</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertsGl</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>

<p>With other minor tweaks to give a new background color, running this
with 3 shards per Entity produces quite a pleasing effect:</p>
<p><img alt="3 shards per
entity" src="files/2008/02/screenshot-3.png"></p>
<p>At 30fps, we can still manage 85 entities, and we're now rendering a fan
of three shards for each one, so we've tripled our throughput to <strong>225
triangles</strong> per frame. I suspect it can get better though. Let's try
cranking up the number of shards per fan, while reducing the number of
fans to maintain 30fps.</p>
<table>
<thead><tr>
<th style="text-align: right;">Shards per entity</th>
<th style="text-align: right;">Entities at 30fps</th>
<th style="text-align: right;">Triangles per frame</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align: right;">3</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">225</td>
</tr>
<tr>
<td style="text-align: right;">
<a href="files/2008/02/7shards85ents.png"><img alt="7 shards" src="files/2008/02/7shards85ents.small.png"></a> 7</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">595</td>
</tr>
<tr>
<td style="text-align: right;">
<a href="files/2008/02/20shards85ents.png"><img alt="20 shards" src="files/2008/02/20shards85ents.small.png"></a> 20</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">1,700</td>
</tr>
<tr>
<td style="text-align: right;">100</td>
<td style="text-align: right;">82</td>
<td style="text-align: right;">8,200</td>
</tr>
<tr>
<td style="text-align: right;">
<a href="files/2008/02/400shards68ents.png"><img alt="400 shards" src="files/2008/02/400shards68ents.small.png"></a> 400</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">27,200</td>
</tr>
<tr>
<td style="text-align: right;">
<a href="files/2008/02/1200shards48ents.png"><img alt="1200 shards" src="files/2008/02/1200shards48ents.small.png"></a>1,200</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">57,600</td>
</tr>
<tr>
<td style="text-align: right;">1,800</td>
<td style="text-align: right;">39</td>
<td style="text-align: right;">70,200</td>
</tr>
<tr>
<td style="text-align: right;">3,000</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">87,000</td>
</tr>
<tr>
<td style="text-align: right;">6,000</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">102,000</td>
</tr>
<tr>
<td style="text-align: right;">
<a href="files/2008/02/12000shards10ents.png"><img alt="" src="files/2008/02/12000shards10ents.small.png"></a> 12,000</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">120,000</td>
</tr>
<tr>
<td style="text-align: right;">100,000</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">100,000</td>
</tr>
</tbody>
</table>
<p>Above about 200 shards per fan, the shards start getting so thin that
they produce moire effects, and above 10,000 there's some crazy white
artifact starts happening in the middle of the fans. But nevertheless,
the times taken to render these frames show a strong trend.</p>
<p>Fewer fans, each with more shards, results in much higher triangle
throughput - up to <strong>120,000 triangles</strong> per frame. Although it's
exciting to see such high figures, I'd almost rather it wasn't the case.
I'd prefer to create a game with more independent entities wandering
around, regardless of how little graphical detail they could be adorned
with. But there you have it, blame John Carmack. Anyhow, it's clear that
we can deliver sufficient graphical grunt to put together <em>some sort</em> of
game. Next time I hope to make a start on putting all these triangles to
good use.</p>
<p><strong>Update:</strong> For a 500% performance boost when running under Linux,
invoke Python with the -O flag. I can now get 500 fans on screen, each
with 100 triangles, at 30fps. See comments below.</p>
<p><strong>On to <a href="http://tartley.com/?p=285">Part 3 - Some Pretty Flowers...</a></strong></p>
<h4>Download the source</h4>
<p><a href="files/2008/02/gameloop2py.zip" title="gameloop2.py.zip"><img alt="Python
file" src="files/2008/02/doc-python.png">gameloop2.py.zip</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/modularised-personal-devices/" class="u-url">Modularised Personal Devices</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/modularised-personal-devices/" rel="bookmark">
            <time class="published dt-published" datetime="2008-02-13T14:18:10-06:00" itemprop="datePublished" title="2008-02-13 14:18">2008-02-13 14:18</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><img alt="One man band" src="files/2008/02/onemanband.jpg"></p>
<p>So <a href="http://lindsaycampbell.tumblr.com/post/26210504">LC</a>,
<a href="http://nixtarolls.nixta.com/post/26188403">Nixta</a> and
<a href="http://www.aaronsdayoff.com/2008/02/modular-phone-answer-to-all-of-our.html">Aaron</a>
all like the Modu modular phone idea. A tiny cheap phone for evenings
out, which slips into its super-blackberry exoskeleton for when you need
to get hardcore about your comms.</p>
<p>Sounds great. I can't help but feel it's the first tiny step towards
'modular personal hardware' concept I've been banging on about for
years. Think about what's good about this mobu phone, and turn it up to
11:</p>
<p>Your phone should be simply a transmitter and receiver. No screen. No
keypad. No memory. It just makes phone calls, *nothing* else. Dirt
cheap.</p>
<p>Your mp3 player likewise. No screen. No buttons. It just plays mp3s and
produces an audio stream. Dirt cheap.</p>
<p>All those devices never come out of your pocket. If you want to interact
with them, you carry ONE screen, ONE keypad control, or whatever. These
connect to any of your carried devices, allowing you to control them.</p>
<p>If you're the sort of person who likes a nice screen, then you buy
*one* nice screen. No need to also buy a nice screen on your phone and
one for your mp3 player and one for your camera, etc etc etc. Same goes
for any aspect of any component device, audio, control keypad, or
storage, or whatever.</p>
<p>Storage is an illustrative example. Each device has almost no on board
storage. Instead, they co-operate to share a single, central bank of
storage, also in your pocket. So instead of carrying X gigabytes in each
device (like now), you pool all that and carry 5X, shared between all
your devices. So each device could still use X gigabytes each, if that
was required. But now you also have the option to choose to allocate
masses of storage to one single device, for example take four or five
times more video than usual, and other devices can just get by with less
memory for time being.</p>
<p>I'm tired of buying overpriced devices that bundle in a dozen mediochre
implementations of stuff which all my other devices already do. It
dilutes competition between hardware providers by forcing all devices to
include a lowest common denominator *everything*. Christ, we *have*
to put in a fancy graphical user interface and an mp3 player in every
phone these days, so everyone puts in crappy ones, just barely adequate.
And so when you choose a phone, you are stuck with all the other crap
that your phone manufacturer decided to bundle with it. Unbundling this
functionality would allow greater competition between device
manufacturers. Users could pick and choose components that suit them.</p>
<p>Obviously, many users couldn't be bothered to mix and match, but for
them, resellers could assemble pre-selected configurations. No biggie.
Competition would still be enhanced, by the resellers choosing the best
available component devices. And everything would cost 1/4 what it costs
now.</p>
<p>It's the Unix philosophy applied to hardware. Small, sharp, incredibly
powerful tools, that each do *one* thing incredibly well, and lean on
each other to get things done. This gives users fantastic power to
recombine them in manifold creative ways, unanticipated by the original
hardware designers.</p>
<p>Welcome to my pipe dream. Everyone I've mentioned it to has called me an
idjut. Your turn.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/someone-comes-to-town-someone-leaves-town/" class="u-url">Someone Comes to Town, Someone Leaves Town</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/someone-comes-to-town-someone-leaves-town/" rel="bookmark">
            <time class="published dt-published" datetime="2008-02-08T01:01:37-06:00" itemprop="datePublished" title="2008-02-08 01:01">2008-02-08 01:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><span style="float: left">
<img alt="Someone Comes to Town, Someone Leaves Town" src="files/2008/02/someone-comes-to-town.jpg"></span></p>
<p><em>by Cory Doctorow</em></p>
<p>I just don't know about this one. I really wanted to like it.</p>
<p><span style="background:#bb2200; color:white; border-radius: 1em; padding-left: 0.5em; padding-right: 0.5em; padding-top: 2px;"><b>spoilers</b></span></p>
<p>It starts out with an interesting, down-to-earth story about a guy establishing
himself in a new neighbourhood, setting up an open wireless mesh net across the
neighbourhood, back in a day when this was still a <em>really cool idea</em>. This
tale is then peppered with initially disconcerting non-literal sounding
references to his family, such as the cliffs and caves of his Father, the
mountain.</p>
<p>Perhaps I embarked upon it too casually. It was certainly engaging, but
by the last few pages I began to suspect that threads of the plot had
eluded me. For example, I had entertained the idea that the fantasy
elements of the story were actually the product of the main character's
stated intention to write a book, which is otherwise only mentioned in
passing here and there. However, the fantasy is woven extremely tightly
together with the realistic aspects of the story, such that I can't
discern any clear boundary to distinguish between the two. So I'm left
wondering if parts of the book didn't actually happen, and if so, which
parts? I should have anticipated someone like <a href="http://craphound.com">Mr
Doctorow</a> would have to be a terrific smarty-pants
in the narrative department, and I doubtless should have paid more
attention along the way.</p>
<p>Rating: 6/10 - One to revisit, maybe, if I like his other stuff.</p>
<p><strong>Update 12th Feb:</strong> Coincidentally, I just read a short story by Cory,
<em>I Row-boat</em>, which despite the awful titular pun, I really liked.
However, I've read a bunch of discussion about <em>Someone Comes to
Town...</em>, and I don't seem to have missed much that anyone else has been
getting out of it. So while I'm looking forward to other stuff by him,
I'm sticking by my personal low enjoyment of this one.</p>
<p><br style="clear: both"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/i-am-legend/" class="u-url">I am Legend</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/i-am-legend/" rel="bookmark">
            <time class="published dt-published" datetime="2008-02-08T00:45:21-06:00" itemprop="datePublished" title="2008-02-08 00:45">2008-02-08 00:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><span style="float: left">
<img alt="I am Legend" src="files/2008/02/i-am-legend.jpg"></span></p>
<p><em>Directed by Francis Lawrence.</em></p>
<p><strong>Summary</strong>
This is going to be one of those reviews where someone reads the book
and then sees the movie and doesn't like it very much.</p>
<p><strong>Details</strong>
I read <em>Robinson Crusoe</em> for the first time when I was about 30. It
forms such a prominent thread within our cultural milieu that I expected
it to be a pinnacle of literature, well-written and evocative. For me,
however, it was nothing of the sort. It seemed to have been lazily
dashed off by a nitwit aristocrat who'd never faced a single day of
hardship in his life, with no thought at all given to the physical and
psychological trials someone in Crusoe's predicament would suffer.</p>
<p>Only weeks later, I read Richard Matheson's novel <em>I am Legend</em>, and
unexpectedly found it to be nigh on exactly the study of loneliness and
despair that I had expected <em>Crusoe</em> would be. The portrayal of frantic
days spent repairing the fortifications, alternating with horrific
sleepless nights spent indoors, listening to <em>them</em> trying to get in, is
as dense an atmosphere of desperation as I think I've ever been party
to.</p>
<p>So it was with conflicting pangs of emotion that I first heard about the
movie. In many ways the movie's strength is simply the inevitable
reaction one has to the depiction of a desolate New York City. Will
Smith's character is now a world-class scientist, bent on reversing the
ravages of the zombie/vampire plague single-handed, working from his
Hollywood-style basement laboratory. The novel's pivotal ending - from
which the title is derived - is utterly transformed into something
rather jolly and upbeat. Even the signs of him fraying around the edges
under the strain have been sanitised - he talks to mannequins, rather
than drinking himself into oblivion. It's <em>Robinson Crusoe</em> all over
again.</p>
<p>Rating: 5/10 - not great.</p>
<p><br style="clear: both"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/2d-graphics-with-pyglet-and-opengl/" class="u-url">2D Graphics With pyglet and OpenGL</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/2d-graphics-with-pyglet-and-opengl/" rel="bookmark">
            <time class="published dt-published" datetime="2008-02-06T00:57:58-06:00" itemprop="datePublished" title="2008-02-06 00:57">2008-02-06 00:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><img align="left" src="files/2008/02/pyglet_logo.png"></p>
<p><a href="http://www.pyglet.org">pyglet</a> is a cross-platform library
that exposes Python bindings for OpenGL, and also provides a bunch of
functionality layered on top of that, such as displaying text and
images, mouse and keyboard events, and playing multimedia. I'd
characterise it as a leaner alternative to
<a href="http://www.pygame.org">PyGame</a>.</p>
<p>I worked my way through <a href="http://www.pyglet.org/doc/programming_guide/writing_a_pyglet_application.html">pyglet's introductory example
code</a>,
and was impressed enough to want to try it out with some of my own code,
so I knocked together the following elementary 2D graphics demo.</p>
<p>Of particular note - it's a deliberate design goal of pyglet that it
needs no other dependencies. After installing it, the following script
'just worked' on both my home Linux lappy and my work Windows desktop,
and adopts sensible default behaviour across multiple monitors. Also,
the resulting code is cleaner and less verbose than equivalent demos
I've created in the past using PyGame.</p>
<h4>App class (the controller)</h4>
<p>The App(lication) class creates our other objects, and then runs the
main animation loop. The window and clock modules are pyglet's -
everything else will be our own classes:</p>
<ul>
<li>World class manages a collection of in-game entities. The
    world.tick() method updates the position or orientation of these
    entities.</li>
<li>Camera class initialises OpenGL and defines projections that map
    from our in-world co-ordinates to pixels on-screen.</li>
<li>Hud class defines text we draw on the screen overlaid on top of the
    world, such as a frames-per-second (fps) counter.</li>
</ul>
<p>Note how in the main loop, we ask our camera class to set two different
projections - one 'worldProjection', after which we draw in-game
entities which are offset and rotated depending on the position of the
camera, followed by a 'hudProjection', for drawing things that should be
drawn in the style of a 'heads-up display', ie. always aligned with the
screen, like text messages and frames-per-second (fps) counters.</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="nc">App</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">world</span> <span class="o">=</span> <span class="n">World</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">win</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span><span class="n">fullscreen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vsync</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">camera</span> <span class="o">=</span> <span class="n">Camera</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mf">100.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hud</span> <span class="o">=</span> <span class="n">Hud</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="p">)</span>
        <span class="n">clock</span><span class="o">.</span><span class="n">set_fps_limit</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">mainLoop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="o">.</span><span class="n">has_exit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="o">.</span><span class="n">dispatch_events</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">worldProjection</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">camera</span><span class="o">.</span><span class="n">hudProjection</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hud</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

            <span class="n">clock</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">App</span><span class="p">()</span>
<span class="n">app</span><span class="o">.</span><span class="n">mainLoop</span><span class="p">()</span>
</pre></div>

<h4>World class (the model)</h4>
<p>The world class is just a container for a collection of in-game
Entities. It uses pyglet's clock.schedule_interval() method to spawn a
new Entity object at a random location every 0.25 seconds.</p>
<p>Every time world.tick() is called, we simply rotate each Entity by an
amount dependent on its size.</p>
<p>Drawing the world merely clears the output buffer, resets the modelview
matrix, and then asks each Entity to draw itself.</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="nc">World</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ents</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextEntId</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">clock</span><span class="o">.</span><span class="n">schedule_interval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spawn</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">spawnEntity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">)</span>
        <span class="n">rot</span> <span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">360.0</span><span class="p">)</span>
        <span class="n">ent</span> <span class="o">=</span> <span class="n">Entity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nextEntId</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">rot</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ents</span><span class="p">[</span><span class="n">ent</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">ent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextEntId</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">ent</span>

    <span class="k">def</span> <span class="nf">tick</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ents</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">ent</span><span class="o">.</span><span class="n">rot</span> <span class="o">+=</span> <span class="mf">10.0</span> <span class="o">/</span> <span class="n">ent</span><span class="o">.</span><span class="n">size</span>

    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">glClear</span><span class="p">(</span><span class="n">GL_COLOR_BUFFER_BIT</span><span class="p">)</span>
        <span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_MODELVIEW</span><span class="p">);</span>
        <span class="n">glLoadIdentity</span><span class="p">();</span>
        <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ents</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">ent</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</pre></div>

<h4>Entity class</h4>
<p>Each entity knows its own location, orientation and size in world-space.
It also knows how to draw itself, using a series of OpenGL calls. For
now, I just draw a triangle for each entity, pointing along its
orientation.</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="nc">Entity</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">rot</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rot</span> <span class="o">=</span> <span class="n">rot</span>

    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">glLoadIdentity</span><span class="p">()</span>
        <span class="n">glTranslatef</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">glRotatef</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rot</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">glScalef</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">glBegin</span><span class="p">(</span><span class="n">GL_TRIANGLES</span><span class="p">)</span>
        <span class="n">glColor4f</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">glVertex2f</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
        <span class="n">glColor4f</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">glVertex2f</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">glColor4f</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">glVertex2f</span><span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">glEnd</span><span class="p">()</span>
</pre></div>

<h4>Camera class (the view)</h4>
<p>The camera class sets the OpenGL projections required to either draw
in-game entities, or else HUD-style on-screen displays. In future
enhancements, the camera's worldProjection mode will not just look at
worldspace co-ordinates (0, 0), but will be able to roam around the
world, and rotate.</p>
<p>Note that the widthRatio calculated in worldProjection() will do an
integer division by default. To fix it, I imported real division (ie.
<code>from __future__ import division</code>)</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="nc">Camera</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">win</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">win</span> <span class="o">=</span> <span class="n">win</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">=</span> <span class="n">zoom</span>

    <span class="k">def</span> <span class="nf">worldProjection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_PROJECTION</span><span class="p">)</span>
        <span class="n">glLoadIdentity</span><span class="p">()</span>
        <span class="n">widthRatio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="o">.</span><span class="n">height</span>
        <span class="n">gluOrtho2D</span><span class="p">(</span>
            <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">*</span> <span class="n">widthRatio</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span> <span class="o">*</span> <span class="n">widthRatio</span><span class="p">,</span>
            <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">zoom</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoom</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">hudProjection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_PROJECTION</span><span class="p">)</span>
        <span class="n">glLoadIdentity</span><span class="p">()</span>
        <span class="n">gluOrtho2D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">win</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
</pre></div>

<h4>Hud class (also part of the view)</h4>
<p>The Hud class initialises the text string 'Hello, World!', and creates
an fps counter. The draw() method renders both these to the screen. It
is worth noting that pyglet handles text like this smartly, rasterising
the Text object to a bitmap when it is first created, and then rapidly
drawing that to the screen using a textured quad in the draw() method.</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="nc">Hud</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">win</span><span class="p">):</span>
        <span class="n">helv</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">'Helvetica'</span><span class="p">,</span> <span class="n">win</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mf">15.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">font</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span>
            <span class="n">helv</span><span class="p">,</span>
            <span class="s1">'Hello, World!'</span><span class="p">,</span>
            <span class="n">x</span><span class="o">=</span><span class="n">win</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">win</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
            <span class="n">halign</span><span class="o">=</span><span class="n">font</span><span class="o">.</span><span class="n">Text</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span>
            <span class="n">valign</span><span class="o">=</span><span class="n">font</span><span class="o">.</span><span class="n">Text</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fps</span> <span class="o">=</span> <span class="n">clock</span><span class="o">.</span><span class="n">ClockDisplay</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_MODELVIEW</span><span class="p">);</span>
        <span class="n">glLoadIdentity</span><span class="p">();</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fps</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</pre></div>

<h4>The Payoff</h4>
<p><img alt="Gameloop
screenshot" src="files/2008/02/gameloop-screenshot.png"></p>
<p>This is reasonably pleasing for a first stab. It runs at 60 frames per
second, adding a new triangle to the screen every 0.25 seconds, and
rotating them all gently. After about 100 triangles, it starts to slow
down, but there are lots of things we can do to optimise it yet. In
particular, I'm hoping that <em>each</em> triangle could be replaced by a
complex geometry without any slowdow, by passing arrays of vertices to
OpenGL, none of which need be touched by our code at all.</p>
<p><strong>On to <a href="http://tartley.com/?p=264">Part 2: Better Vertex
Throughput...</a></strong></p>
<h4>Download the source</h4>
<p><a href="files/2008/02/gamelooppy.zip" title="gameloop.py.zip"><img alt="Python
file" src="files/2008/02/doc-python.png">gameloop.py.zip</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/lappy-sketch-lives/" class="u-url">Lappy sketch lives!</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/lappy-sketch-lives/" rel="bookmark">
            <time class="published dt-published" datetime="2008-02-05T13:13:02-06:00" itemprop="datePublished" title="2008-02-05 13:13">2008-02-05 13:13</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><img alt="Lappy" src="files/2008/02/lappy.jpg"></p>
<p>My lappy sketch lives! on <a href="http://blog.kamil.dworakowski.name/">Kamil's blog
title</a>. Har! That was an easy post.
No thinking required.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/the-hacker-crackdown-law-and-disorder-on-the-electronic-frontier/" class="u-url">The Hacker Crackdown : Law and Disorder on the Electronic Frontier</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/the-hacker-crackdown-law-and-disorder-on-the-electronic-frontier/" rel="bookmark">
            <time class="published dt-published" datetime="2008-02-02T16:15:49-06:00" itemprop="datePublished" title="2008-02-02 16:15">2008-02-02 16:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><span style="float: left">
<img alt="The Hacker Crackdown" src="files/2008/01/hacker-crackdown.jpg"></span></p>
<p><em>by Bruce Sterling, <a href="http://www.archive.org/search.php?query=hacker%20crackdown%20AND%20mediatype%3Aaudio%20AND%20collection%3Aopensource_audio">read aloud by Cory Doctorow</a></em></p>
<p>Only the second audiobook I've bothered to listen to, and it seems to
work very well, especially when commuting, since you can continue
listening without interruption while leaving the tube and walking. (It's
taken me 36 years to figure this out? Genius.)</p>
<p>Cory does a fine job of reading, and I'm grateful to him for bringing
this important book to my attention. When he describes reading it on
it's publication in 1994 as 'life changing', I can understand why. It
describes the clash of cultures resulting from American law
enforcement's attempts to crack down on the hackers, crackers and
phreaks of the nascent cyberpunk underworld of the early '90s. Many of
the underlying issues have even more relevance today. Can taking a copy
of digital information be equated with stealing, given that the original
owner still retains their original copy? Or is it more analogous to
attempting to overhear a conversation which the speakers would rather
wasn't overheard? While some hackers have real criminal intent, there
are a significant proportion with a very strong ethic to do no harm, who
view their tinkering as merely the exploration of an online frontier,
filled with challenges and puzzles, and rewards of rich hordes of
information - the dispersal of which is not just a god-given right, but
actually a moral responsibility.</p>
<p>When law enforcement agencies went after this crowd with a heavy-handed
and indiscriminate approach, teenagers still living with their parents
ended up in court facing years in prison, colossal fines and legal fees,
in some instances simply for simply republishing a document that was
already in widespread circulation. Innocents had tens of thousands of
dollars worth of computers seized and never returned, even though no
charges were ever filed against them. The resulting backlash formed the
beginnings of the Electronic Frontier Foundation, a philanthropic
organization devoted to defending the rights of individuals in the
online realm.</p>
<p>This whole tale is laced with many entertaining insights into the quirks
and motives of the colorful individuals involved, and this makes the
whole thing an enjoyable romp through a serious topic.</p>
<p>Rating: 8/10 - I only wish I'd read it ten years ago</p>
<p><br style="clear: both"></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-9.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-7.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer"></footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
