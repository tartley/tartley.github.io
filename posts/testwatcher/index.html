<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Testwatcher | tartley.com</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://www.tartley.com/posts/testwatcher/">
<link rel="icon" href="../../welcome.gif" sizes="16x16">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Jonathan Hartley">
<link rel="prev" href="../the-day-the-earth-stood-still/" title="The Day The Earth Stood Still" type="text/html">
<link rel="next" href="../cloverfield-2008/" title="Cloverfield (2008)" type="text/html">
<meta property="og:site_name" content="tartley.com">
<meta property="og:title" content="Testwatcher">
<meta property="og:url" content="https://www.tartley.com/posts/testwatcher/">
<meta property="og:description" content="Sometimes when programming I like to leave unit tests running
repeatedly in one window while editing the code and tests in another.
The bash command watch is useful for this, and can highlight the
dif">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2009-04-29T23:02:59-05:00">
<meta property="article:tag" content="geek">
<meta property="article:tag" content="python">
<meta property="article:tag" content="software">
<meta property="article:tag" content="terminal">
<meta property="article:tag" content="testing">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://www.tartley.com/">

                <span id="blog-title">tartley.com</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>
                </li>
<li>
<a href="../../rss.xml">RSS feed</a>
                </li>
<li>
<a href="../../pages/about/">About</a>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="https://tartley.com/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Searchâ€¦" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Testwatcher</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2009-04-29T23:02:59-05:00" itemprop="datePublished" title="2009-04-29 23:02">2009-04-29 23:02</time></a>
            </p>
                <p class="commentline">            <a href="#disqus_thread" data-disqus-identifier="cache/posts/testwatcher.html">Comments</a>


            
        </p>
</div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>Sometimes when programming I like to leave unit tests running
repeatedly in one window while editing the code and tests in another.
The bash command <code>watch</code> is useful for this, and can highlight the
differences between one invocation and the next in
inverse.</p>
<p>I wanted a version of <code>watch</code> for use on Windows, so I whipped up a
quick Python script,
<a href="http://code.google.com/p/testwatcher/">testwatcher</a>, which produces
output very similar to watch, but is cross-platform, and features not
just inverse text, but <em>yellow</em> inverse text. Woo-hoo!</p>
<pre class="code literal-block"><span></span><code>$ python example_test.py
F.F
<span class="o">======================================================================</span>
FAIL: testThat <span class="o">(</span>__main__.TestWatcherTest<span class="o">)</span>
----------------------------------------------------------------------
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">"example_test.py"</span>, line <span class="m">12</span>, in testThat
    self.assertEquals<span class="o">(</span><span class="m">0</span>, randint<span class="o">(</span><span class="m">0</span>, <span class="m">10</span><span class="o">))</span>
AssertionError: <span class="m">0</span> !<span class="o">=</span> <span class="nv">4</span>

<span class="o">======================================================================</span>
FAIL: testThis <span class="o">(</span>__main__.TestWatcherTest<span class="o">)</span>
----------------------------------------------------------------------
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">"example_test.py"</span>, line <span class="m">9</span>, in testThis
    self.assertEquals<span class="o">(</span><span class="s1">'one'</span>, object<span class="o">())</span>
AssertionError: <span class="s1">'one'</span> !<span class="o">=</span> d24460&gt;

----------------------------------------------------------------------
Ran <span class="m">3</span> tests in <span class="m">0</span>.001s

FAILED <span class="o">(</span><span class="nv">failures</span><span class="o">=</span><span class="m">2</span><span class="o">)</span>
_
</code></pre>

<p>Incidentally, the above test makes it very clear that Python objects in
successive processes get new addresses on Linux, but interestingly on
Windows the same addresses seems to get re-used for different processes.</p>
<p>I can't help but suspect this is a dumb script to have written - it
should only be a:</p>
<pre class="code literal-block"><span></span><code> <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">command</span>
</code></pre>

<p>but in order to shoehorn the inverse text and colors in, it's grown to
300 lines - a hideous bloat for a minor superficial thrill. Plus the
Windows version flickers terribly - I'm currently using <code>system('cls')</code>
to clear the screen and then redraw it every second. I'll do some
searching for better ways to do it.</p>
<p>However - I've long wanted a Python interface to perform simple terminal
actions like colors and animation on different platforms (the standard
library 'curses' module that would otherwise do the job is simply not
implemented on Windows.) So maybe it's time I used this script as an
excuse to figure this out. Suggestions welcome.</p>
<p><strong>Update:</strong> This idea may have now reached a viable fruition
<a href="https://github.com/tartley/rerun2/">here</a>.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/geek/" rel="tag">geek</a></li>
            <li><a class="tag p-category" href="../../categories/python/" rel="tag">python</a></li>
            <li><a class="tag p-category" href="../../categories/software/" rel="tag">software</a></li>
            <li><a class="tag p-category" href="../../categories/terminal/" rel="tag">terminal</a></li>
            <li><a class="tag p-category" href="../../categories/testing/" rel="tag">testing</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../the-day-the-earth-stood-still/" rel="prev" title="The Day The Earth Stood Still">Previous post</a>
            </li>
            <li class="next">
                <a href="../cloverfield-2008/" rel="next" title="Cloverfield (2008)">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="tartley",
            disqus_url="https://www.tartley.com/posts/testwatcher/",
        disqus_title="Testwatcher",
        disqus_identifier="cache/posts/testwatcher.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="tartley";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer"></footer>
</div>
</div>

            <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
