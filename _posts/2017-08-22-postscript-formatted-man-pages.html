---
layout: post
status: publish
published: true
title: Postscript formatted man pages
author:
  display_name: tartley
  login: tartley
  email: tartley@tartley.com
  url: http://tartley.com
author_login: tartley
author_email: tartley@tartley.com
author_url: http://tartley.com
wordpress_id: 1683
wordpress_url: http://tartley.com/?p=1683
date: '2017-08-22 20:34:02 -0500'
date_gmt: '2017-08-22 19:34:02 -0500'
categories:
- Linux-dev
- Bash
tags: []
comments: []
---
<p><code>man</code>&nbsp;and its <code>troff</code> formatting can be asked to produce postscript output. Define a Bash function, e.g. in your .bashrc:</p>
<pre lang="bash" escaped="true">function psman () {
    SLUG=$(echo $@ | tr ' ' '-')
    FNAME="/tmp/man-$SLUG.pdf"
    set -o pipefail
    man -t "$@" | ps2pdf - "$FNAME" && \
      nohup evince "$FNAME" >/dev/null 2>/dev/null
    set +o pipefail
}</pre>
<p>(I tried to do this without tempfiles, using process substitution, <a href="https://superuser.com/questions/1243405">but failed. Anyone got better Bash-fu</a>?)</p>
<p>The <code>man -t</code> is the crucial part. It tells <code>man</code> to produce output in postscript format, which <code>ps2pdf</code> can read, and <code>evince</code> displays the PDF. We disconnect the evince process using <code>nohup</code>, so that it lives on even if we kill the terminal. We `set -o pipefail` so that if `man` fails, the exit code is preserved as the exit of `man|ps2pdf`, which causes the `&&` to short-circuit, preventing evince from being run on an empty pdf document. We restore `+o pipefail` again at the end.</p>
<p>Then, from the command line:</p>
<pre lang="bash">$ psman tr</pre>
<p>produces</p>
<p><a href="http://tartley.com/wp-content/uploads/2017/08/pman-tr.png"><img class="alignnone wp-image-1684 size-full" src="http://tartley.com/wp-content/uploads/2017/08/pman-tr.png" alt="" width="973" height="491" /></a></p>
<p>&nbsp;</p>
