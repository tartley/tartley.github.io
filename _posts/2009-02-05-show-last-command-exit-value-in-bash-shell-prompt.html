---
layout: post
status: publish
published: true
title: Show last command exit value in Bash shell prompt
author:
  display_name: tartley
  login: tartley
  email: tartley@tartley.com
  url: http://tartley.com
author_login: tartley
author_email: tartley@tartley.com
author_url: http://tartley.com
wordpress_id: 657
wordpress_url: http://tartley.com/?p=657
date: '2009-02-05 12:11:57 -0600'
date_gmt: '2009-02-05 12:11:57 -0600'
categories:
- Geek
tags: []
comments:
- id: 19439
  author: Kamil
  author_email: kaml@dworakowski.name
  author_url: http://blog.kamil.dworakowski.name
  date: '2009-02-05 13:21:59 -0600'
  date_gmt: '2009-02-05 13:21:59 -0600'
  content: I like that color scheme.
- id: 22959
  author: Kamil
  author_email: kamil@dworakowski.name
  author_url: http://kamil.dworakowski.name
  date: '2009-08-28 21:49:29 -0500'
  date_gmt: '2009-08-28 21:49:29 -0500'
  content: "Below follows a minimal change to the bash prompt. Just add the conditional
    red result at the front.\r\n\r\nPRE='\\[33['\r\nPOST='m\\]'\r\nCOL_LASTEXIT=\"${PRE}01;41;37${POST}\"
    # last command exit value\r\nCOL_DEFAULT=\"${PRE}00${POST}\" # back to default
    colors\r\nexport PS1=\"$COL_LASTEXIT\\${?#0}$COL_DEFAULT\\[33[01;32m\\]\\u@\\h\\[33[01;34m\\]
    \\w \\$\\[33[00m\\] \""
---
<p>Stick something like this in your .bashrc file:</p>
<pre lang="bash"># set PS1, last exit code if != 0, and PWD, with colors
PRE='\[<pre wp-pre-tag-0></pre>33['
POST='m\]'
COL_LASTEXIT="${PRE}01;41;37${POST}" # last command exit value
COL_PWD="${PRE}00;01;36${POST}" # current directory
COL_DEFAULT="${PRE}00${POST}" # back to default colors
export PS1="$COL_LASTEXIT\${?#0}$COL_PWD \w$COL_DEFAULT\n\\$ "</pre>
<p>Command exit values other than zero are displayed in the subsequent prompt:</p>
<p>[caption id="attachment_658" align="alignnone" width="442" caption="Check out the little red &#39;1&#39;"]<img class="size-full wp-image-658" title="last-exit-value" src="http://tartley.com/wp-content/uploads/2009/02/last-exit-value.png" alt="Check out the little red '1'" width="442" height="229" />[/caption]</p>
<p>It's the</p>
<pre>${?#0}</pre>
<p>bit which includes the last command exit value in the prompt, unless the value is zero, in which case nothing is displayed.</p>
