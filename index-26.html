<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Creating a website devoted to oneself has been described as the greatest act of hubris. Welcome aboard!">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>tartley.com (old posts, page 26) | tartley.com</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="assets/css/custom.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="rss.xml">
<link rel="canonical" href="https://www.tartley.com/index-26.html">
<link rel="icon" href="welcome.gif" sizes="16x16">
<link rel="prev" href="." type="text/html">
<link rel="next" href="index-25.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://www.tartley.com/">

                <span id="blog-title">tartley.com</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>
                </li>
<li>
<a href="rss.xml">RSS feed</a>
                </li>
<li>
<a href="pages/about/">About</a>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
<input type="hidden" name="sites" value="https://tartley.com/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
    
    <a rel="me" href="https://mastodon.social/@tartley"></a>
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/three-parts-dead/" class="u-url">Three Parts Dead</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/three-parts-dead/" rel="bookmark">
            <time class="published dt-published" datetime="2021-12-15T23:16:46-06:00" itemprop="datePublished" title="2021-12-15 23:16">2021-12-15 23:16</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p><span style="float: left">
<img alt="Three Parts Dead cover" src="files/2021/three-parts-dead-cover.webp"></span></p>
<p><em>by Max Gladstone (2012).</em></p>
<p>A loveable romp. Technical witchcraft. Lawyerly magic wielders. Murdered gods.
What's not to like?</p>
<p>But will I continue with the series? I think... not. Which is actually a good
thing - there are just
<a href="https://www.goodreads.com/book/show/189147.To_Your_Scattered_Bodies_Go">so</a>
<a href="https://www.goodreads.com/book/show/968902.Dying_Inside">many</a>
<a href="https://www.goodreads.com/book/show/26187256-the-thing-itself">other</a>
<a href="https://www.goodreads.com/book/show/36836025-the-electric-state">things</a>
<a href="https://www.goodreads.com/book/show/25372801-all-the-birds-in-the-sky">I'm</a>
<a href="https://www.goodreads.com/book/show/42036538-gideon-the-ninth">dying</a>
<a href="https://www.goodreads.com/book/show/13821.Lord_of_Light">to</a>
<a href="https://www.goodreads.com/book/show/13259270-free-will">read</a>
<a href="https://www.goodreads.com/book/show/50202953-piranesi">right</a>
<a href="https://www.goodreads.com/book/show/31379914-the-collapsing-empire">now</a>.</p>
<p><br style="clear: left"></p>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/creating-animated-meme-gifs-on-the-command-line/" class="u-url">Creating Animated Meme GIFs on the Command-Line</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/creating-animated-meme-gifs-on-the-command-line/" rel="bookmark">
            <time class="published dt-published" datetime="2021-12-08T15:32:10-06:00" itemprop="datePublished" title="2021-12-08 15:32">2021-12-08 15:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Got sick of navigating the limitations of various online services to create
animated gif memes, finally figured out how to do it manually. Not a universal
process, just what worked for my situation. (Which is Ubuntu 21.10, "Impish".)</p>
<p>All of of the ffmpeg invocations could probably be combined into one, but I
show the commands as I used them, as I was figuring each step out.</p>
<h4>1. Download a video</h4>
<p>Starting from a video on YouTube:</p>
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/6-gJMs6DwuE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p></p>

<p>To download this locally,
<a href="https://github.com/ytdl-org/youtube-dl">install <code>youtube-dl</code></a>,
hit the YouTube <em>share</em> button to grab the video's encoded URL,
and:</p>
<pre class="code literal-block"><span></span><code>youtube-dl https://youtu.be/6-gJMs6DwuE -o Ash.mp4
</code></pre>

<p>This gives me an 850KB .mp4 video file.</p>
<h4>2. Split</h4>
<p>I only want the final few seconds. To remove the start of the video,
keeping from 6.5 seconds until the end:</p>
<pre class="code literal-block"><span></span><code>ffmpeg -hide_banner -i Ash.mp4 -acodec copy -vcodec libx264 -ss 00:00:06.5 Ash-split.mp4
</code></pre>

<p>Args to ffmpeg are position sensitive. Specifying '-ss' (to split the file)
before the input ('-i') can't create the split at an accurate location, since
it has to guess whereabouts in the file the given timestamp will occur. But
putting it after the input (as done here) means it can split accurately on the
given timestamp, since the file has been processed by the time this arg gets
actioned, so accurate timestamp/frame conversion is known, at the cost of
having had to process even the parts of the video that are then discarded.</p>
<p>Vcodec of libx264 is specified because, according to stackoverflow,
"<a href="https://stackoverflow.com/questions/5651654/ffmpeg-how-to-split-video-efficiently#comment85070704_13289426">scenes in mp4 are broken</a>", whatever that means,
and specifying "copy", as most people do, gives me an output with no video,
only audio.</p>
<p>This results in a three second, 217KB .mp4 video file. (the following is just an
image of it).</p>
<p><img alt="ash-split.webp" src="files/2021/ash-split.webp"></p>
<h4>3. Crop</h4>
<p>To crop out the black bars from the top and bottom:</p>
<pre class="code literal-block"><span></span><code>ffmpeg -hide_banner -i Ash-split.mp4 -vf 'crop=iw:365' Ash-split-crop.mp4
</code></pre>

<p>Here, we crop it to the input width "iw", and 365 high. In the absense of
any offset ordinates for the crop, ffmpeg defaults to centering them, so this
365 pixels are taken from the (spatial, vertical) middle of the video, which is
exactly what we want.</p>
<p>This results in a three second, 220KB .mp4 video file.</p>
<p><img alt="ash-split-crop.webp" src="files/2021/ash-split-crop.webp"></p>
<h3>4. Resize and convert to gif</h3>
<pre class="code literal-block"><span></span><code><span class="s s-Atom">ffmpeg</span> <span class="o">-</span><span class="s s-Atom">hide_banner</span> <span class="o">-</span><span class="s s-Atom">i</span> <span class="nv">Ash</span><span class="o">-</span><span class="s s-Atom">split</span><span class="o">-</span><span class="s s-Atom">crop</span><span class="p">.</span><span class="s s-Atom">mp4</span> <span class="o">-</span><span class="s s-Atom">vf</span> <span class="s s-Atom">'scale=512:-1'</span> <span class="nv">Ash</span><span class="o">-</span><span class="s s-Atom">split</span><span class="o">-</span><span class="s s-Atom">crop</span><span class="o">-</span><span class="s s-Atom">resize</span><span class="p">.</span><span class="s s-Atom">gif</span>
</code></pre>

<p>This results in a grainy-but-passable three second 750KB animated .gif:</p>
<p><img alt="ash-split-crop-resize.gif" src="files/2021/ash-split-crop-resize.gif"></p>
<p>The file size can be smaller, if you care, most easily by splitting a shorter
video clip, reducing the frame rate, or reducing the 'scale' in this step.</p>
<p>Alternately, this could be done using ImageMagik's 'convert', but the result
of that was a very large (10MB) file and played very slowly, and I wasn't
immediately sure how to fix that.</p>
<h3>5. Add text</h3>
<p>Using Imagemagik's 'convert':</p>
<pre class="code literal-block"><span></span><code>convert \
    Ash-split-crop-resize.gif \
    -coalesce \
    -font impact -pointsize 36 -fill white -stroke black -strokewidth 2 \
    -gravity north -annotate +0+0 'I can''t lie about your chances, but' \
    -gravity south -annotate +0+0 'you have my sympathies' \
    -layers Optimize \
    Ash-split-crop-resize-text.gif
</code></pre>

<p>The '-coalesce' option removes all the .gif optimizations, then we apply the
text labels, then the '-layers' option re-applies optimizations. Without this
dance, the text is all twitchy and messy.</p>
<p>Voilà. Imagine sending it to a co-worker who is taking on a difficult task,
like making changes to that thorny section of the codebase that nobody likes:</p>
<p><img alt="ash-split-crop-resize-text.gif" src="files/2021/ash-split-crop-resize-text.gif"></p>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/subnautica-below-zero/" class="u-url">Subnautica: Below Zero</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Jonathan Hartley
            </span></p>
            <p class="dateline">
            <a href="posts/subnautica-below-zero/" rel="bookmark">
            <time class="published dt-published" datetime="2021-11-22T16:24:22-06:00" itemprop="datePublished" title="2021-11-22 16:24">2021-11-22 16:24</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p><em>on Windows, published 2021</em>. <img alt="spoilers" src="files/spoilers.svg"></p>
<p><a href="https://subnautica.fandom.com/wiki/Subnautica_Wiki">Subnautica</a>,
and its icy sequel,
"<a href="https://subnautica.fandom.com/wiki/Subnautica:_Below_Zero">Below Zero</a>",
have perhaps been my favorite
games of the last few years. The majority of their run time takes place under
the colorful waters of an alien ocean. It's been a joy to sit side-by-size
with Zander for tense scuba cave dives, or piloting vehicles through
vertiginous underwater cave systems, headlights straining through the murk to
reveal wonders. It has inspired
<a href="https://www.reddit.com/r/Subnautica_Below_Zero/comments/r82l3i/birthday_cake_no_spoilers/">cake</a>.</p>
<p>Part of the games take place on land though. I <em>started</em> drawing a map of Below
Zero's Glacial Basin region just to keep track of where we'd been. To make sure
we visited all the locations, found all the MacGuffins (I'm looking at <em>you</em>,
pesky antidote), and experienced all that there was to experience.</p>
<p>But as those goals approached completion, I <em>finished</em> drawing it because it
had become a therapeutic experience. Happily exploring away, mesmerised by the
scenery, avoiding hostile wildlife, uncovering the ruins of ancient alien
artifacts. Reckoning distances by eye, scribbling down what we found, updating
and correcting the map as we went. Being lost in the experience. Simply a joy.</p>
<p><a href="https://www.reddit.com/r/Subnautica_Below_Zero/comments/qutkqz/hand_drawn_map_of_southern_glacial_region_wip/">Reddit is encouraging me</a>
to tackle the tricky Actic Spires area, too. <em>&lt;Rubs hands&gt;...</em></p>
<p><span style="float: left">
<img alt="Subnautica screenshot" src="files/2021/subnatica-below-zero-map-glacial-basin.png"></span></p>
<p><br style="clear: left"></p>
</div>
    </div>
    </article>
</div>
        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="." rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-25.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer"></footer>
</div>
</div>

            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
