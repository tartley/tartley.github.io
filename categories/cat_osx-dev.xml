<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>tartley.com (Posts about OSX-dev)</title><link>https://www.tartley.com/</link><description></description><atom:link href="https://www.tartley.com/categories/cat_osx-dev.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents Â© 2020 &lt;a href="mailto:tartley@tartley.com"&gt;Jonathan Hartley&lt;/a&gt; &lt;a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"&gt;&lt;img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /&gt;&lt;/a&gt;&lt;br /&gt;&lt;span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"&gt;tartley.com&lt;/span&gt; by &lt;a xmlns:cc="http://creativecommons.org/ns#" href="https://www.tartley.com" property="cc:attributionName" rel="cc:attributionURL"&gt;Jonathan Hartley&lt;/a&gt; is licensed under a &lt;a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"&gt;Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License&lt;/a&gt;.</copyright><lastBuildDate>Thu, 11 Jun 2020 20:01:49 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Encrypted zip files on OSX</title><link>https://www.tartley.com/posts/2012/10/9/encrypted-zip-files-on-osx.html</link><dc:creator>Jonathan Hartley</dc:creator><description>&lt;div&gt;&lt;p&gt;My passwords and other miscellany are in a plain text file within an
encrypted zip. Since starting to use OSX I've been looking for a way to
access my passwords such that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I get prompted for the decryption password.&lt;/li&gt;
&lt;li&gt;The file gets unzipped, but not in the same directory, because
    that's synced to Dropbox, so would send my plaintext passwords to
    them every time I accessed them. Maybe to /tmp?&lt;/li&gt;
&lt;li&gt;The plaintext file within the zip is opened in \$EDITOR.&lt;/li&gt;
&lt;li&gt;Wait for me to close \$EDITOR, then remove my plaintext passwords
    from the filesystem.&lt;/li&gt;
&lt;li&gt;Before deleting the passwords, check if I've updated them. If so,
    put the new updated version back into the original zip file.&lt;/li&gt;
&lt;li&gt;Don't forget to keep the updated zip file encrypted, using the same
    password as before, without prompting for it again.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I failed to find an existing app which would do all this (although I had
no trouble on Linux or even on Windows.) Hence, resorting to good old
Bash:&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="nv"&gt;ZIPDIR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="nv"&gt;$HOME&lt;/span&gt;&lt;span class="s2"&gt;/docs/org"&lt;/span&gt;

&lt;span class="nb"&gt;read&lt;/span&gt; -s -p &lt;span class="s2"&gt;"Password:"&lt;/span&gt; key

&lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;$ZIPDIR&lt;/span&gt;
unzip -P &lt;span class="nv"&gt;$key&lt;/span&gt; passwords.zip passwords.txt -d &lt;span class="nv"&gt;$TMPDIR&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; &lt;span class="nv"&gt;$?&lt;/span&gt; !&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;]]&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="nv"&gt;$TMPDIR&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
touch passwords.datestamp
&lt;span class="nv"&gt;$EDITOR&lt;/span&gt; passwords.txt
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; passwords.txt -nt passwords.datestamp &lt;span class="o"&gt;]]&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    zip -P &lt;span class="nv"&gt;$key&lt;/span&gt; -r &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="nv"&gt;$ZIPDIR&lt;/span&gt;&lt;span class="s2"&gt;/passwords.zip"&lt;/span&gt; passwords.txt
&lt;span class="k"&gt;fi&lt;/span&gt;

rm passwords.txt
rm passwords.datestamp
&lt;/code&gt;&lt;/pre&gt;


&lt;p&gt;I don't expect this to be watertight, but seems good enough for today.
I'm happy to hear suggestions.&lt;/p&gt;&lt;/div&gt;</description><category>OSX-dev</category><guid>https://www.tartley.com/posts/2012/10/9/encrypted-zip-files-on-osx.html</guid><pubDate>Tue, 09 Oct 2012 15:17:07 GMT</pubDate></item></channel></rss>